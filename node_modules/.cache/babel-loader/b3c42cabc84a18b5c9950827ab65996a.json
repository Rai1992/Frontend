{"ast":null,"code":"/*\r\n * Copyright (c) 2015-present, Vitaly Tomilov\r\n *\r\n * See the LICENSE file at the top-level directory of this distribution\r\n * for licensing information.\r\n *\r\n * Removal or modification of this copyright notice is prohibited.\r\n */\n'use strict';\n\nconst npm = {\n  os: require('os'),\n  utils: require('../utils'),\n  minify: require('pg-minify')\n};\n/**\r\n * @class errors.QueryFileError\r\n * @augments external:Error\r\n * @description\r\n * {@link errors.QueryFileError QueryFileError} class, available from the {@link errors} namespace.\r\n *\r\n * This type represents all errors related to {@link QueryFile}.\r\n *\r\n * @property {string} name\r\n * Standard {@link external:Error Error} property - error type name = `QueryFileError`.\r\n *\r\n * @property {string} message\r\n * Standard {@link external:Error Error} property - the error message.\r\n *\r\n * @property {string} stack\r\n * Standard {@link external:Error Error} property - the stack trace.\r\n *\r\n * @property {string} file\r\n * File path/name that was passed into the {@link QueryFile} constructor.\r\n *\r\n * @property {object} options\r\n * Set of options that was used by the {@link QueryFile} object.\r\n *\r\n * @property {SQLParsingError} error\r\n * Internal $[SQLParsingError] object.\r\n *\r\n * It is set only when the error was thrown by $[pg-minify] while parsing the SQL file.\r\n *\r\n * @see QueryFile\r\n *\r\n */\n\nclass QueryFileError extends Error {\n  constructor(error, qf) {\n    const isSqlError = error instanceof npm.minify.SQLParsingError;\n    const message = isSqlError ? 'Failed to parse the SQL.' : error.message;\n    super(message);\n    this.name = this.constructor.name;\n\n    if (isSqlError) {\n      this.error = error;\n    }\n\n    this.file = qf.file;\n    this.options = qf.options;\n    Error.captureStackTrace(this, this.constructor);\n  }\n\n}\n/**\r\n * @method errors.QueryFileError#toString\r\n * @description\r\n * Creates a well-formatted multi-line string that represents the error.\r\n *\r\n * It is called automatically when writing the object into the console.\r\n *\r\n * @param {number} [level=0]\r\n * Nested output level, to provide visual offset.\r\n *\r\n * @returns {string}\r\n */\n\n\nQueryFileError.prototype.toString = function (level) {\n  level = level > 0 ? parseInt(level) : 0;\n  const gap0 = npm.utils.messageGap(level),\n        gap1 = npm.utils.messageGap(level + 1),\n        lines = ['QueryFileError {', gap1 + 'message: \"' + this.message + '\"', gap1 + 'options: ' + JSON.stringify(this.options), gap1 + 'file: \"' + this.file + '\"'];\n\n  if (this.error) {\n    lines.push(gap1 + 'error: ' + this.error.toString(level + 1));\n  }\n\n  lines.push(gap0 + '}');\n  return lines.join(npm.os.EOL);\n};\n\nnpm.utils.addInspection(QueryFileError, function () {\n  return this.toString();\n});\nmodule.exports = QueryFileError;","map":null,"metadata":{},"sourceType":"script"}