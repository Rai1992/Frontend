{"ast":null,"code":"require(\"dotenv\").config();\n\nconst massive = require(\"massive\");\n\nconst express = require(\"express\");\n\nconst session = require(\"express-session\");\n\nconst _process$env = process.env,\n      SERVER_PORT = _process$env.SERVER_PORT,\n      HEROKU_CONNECTION_STRING = _process$env.HEROKU_CONNECTION_STRING,\n      SESSION_SECRET = _process$env.SESSION_SECRET;\nconst app = express();\n\nconst server = require(\"http\").Server(app);\n\napp.use(express.json());\n\nconst main_controller = require('./controller/main_controller'); //we use this to easily connect to our heroku database, Right now its free\n\n\nmassive(HEROKU_CONNECTION_STRING).then(db => {\n  app.set(\"db\", db);\n  server.listen(SERVER_PORT, () => {\n    console.log(\"[\".concat(SERVER_PORT, \"] PORT, Massive connected to Heroku\"));\n  });\n}).catch(err => console.log(err)); //uses cookies to store information for us\n\napp.use(session({\n  secret: SESSION_SECRET,\n  resave: false,\n  saveUninitialized: false,\n  //creates a session no matter what which uses memory which = bad\n  cookie: {\n    maxAge: 1000 * 60 * 60 * 24 * 3 //3 days\n\n  }\n}));\napp.post('/api/register', main_controller.register);\napp.post('/api/login', main_controller.login);\napp.post('/api/create-listing', main_controller.createListing);\napp.get('/api/get-all-listings', main_controller.grabAllListings);\napp.delete('/api/logout', main_controller.logout);\napp.delete(\"/api/delete-listing/:id\", main_controller.deleteListing);","map":null,"metadata":{},"sourceType":"script"}